<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <title>Mythic+</title>  
</head>
<body>
  <h1>Mythic+</h1>

  <div class="rating">
    <input type="text" id="rio" placeholder="M+ Rating">
    <button onclick="saveRio()">SAVE</button>
  </div>

  <div class="grid" id="grid">
    <div class="card counter-0" data-index="0">
      <h2>Eco-Dome Al’dani</h2>
      <div id="counter-0" class="counter-window">0</div>
      <div class="controls">
        <button class="minus" onclick="change(0,-1)">-</button>
        <button class="plus" onclick="change(0,1)">+</button></div>
    </div>
    
    <div class="card counter-1" data-index="1">
      <h2>Ara-Kara, City of Echoes</h2>
      <div id="counter-1" class="counter-window">0</div>
      <div class="controls">
        <button class="minus" onclick="change(1,-1)">-</button>
        <button class="plus" onclick="change(1,1)">+</button></div>
    </div>
    
    <div class="card counter-2" data-index="2">
      <h2>The Dawnbreaker</h2>
      <div id="counter-2" class="counter-window">0</div>
      <div class="controls">
        <button class="minus" onclick="change(2,-1)">-</button>
        <button class="plus" onclick="change(2,1)">+</button></div>
    </div>
    
    <div class="card counter-3" data-index="3">
      <h2>Priory of the Sacred Flame</h2>
      <div id="counter-3" class="counter-window">0</div>
      <div class="controls">
        <button class="minus" onclick="change(3,-1)">-</button>
        <button class="plus" onclick="change(3,1)">+</button></div>
    </div>
    
    <div class="card counter-4" data-index="4">
      <h2>Operation: Floodgate</h2>
      <div id="counter-4" class="counter-window">0</div>
      <div class="controls">
        <button class="minus" onclick="change(4,-1)">-</button>
        <button class="plus" onclick="change(4,1)">+</button></div>
    </div>
    
    <div class="card counter-5" data-index="5">
      <h2>Halls of Atonement</h2>
      <div id="counter-5" class="counter-window">0</div>
      <div class="controls">
        <button class="minus" onclick="change(5,-1)">-</button>
        <button class="plus" onclick="change(5,1)">+</button></div>
    </div>
    
    <div class="card counter-6" data-index="6">
      <h2>Tazavesh: Streets of Wonder</h2>
      <div id="counter-6" class="counter-window">0</div>
      <div class="controls">
        <button class="minus" onclick="change(6,-1)">-</button>
        <button class="plus" onclick="change(6,1)">+</button></div>
    </div>
    
    <div class="card counter-7" data-index="7">
      <h2>Tazavesh: So’leah’s Gambit</h2>
      <div id="counter-7" class="counter-window">0</div>
      <div class="controls">
        <button class="minus" onclick="change(7,-1)">-</button>
        <button class="plus" onclick="change(7,1)">+</button></div>
    </div>
  </div>

  <footer>
     
  </footer>

  <script>
    const counts = [0,0,0,0,0,0,0,0];

    // Načítanie uložených hodnôt
    const saved = JSON.parse(localStorage.getItem("dungeonCounts"));
    if (saved) {
      saved.forEach((val, idx) => {
        counts[idx] = val;
        document.getElementById(`counter-${idx}`).textContent = val;
      });
      sortCards();
    }

    function change(index, delta) {
      const newVal = Math.max(0, counts[index] + delta);
      counts[index] = newVal;
      document.getElementById(`counter-${index}`).textContent = newVal;
      localStorage.setItem("dungeonCounts", JSON.stringify(counts));
      sortCards();
    }

    function sortCards() {
      const grid = document.getElementById("grid");
      const cards = Array.from(grid.children);

      cards.sort((a, b) => {
        const idxA = parseInt(a.dataset.index);
        const idxB = parseInt(b.dataset.index);
        return counts[idxB] - counts[idxA]; // zostupne
      });

      cards.forEach(card => grid.appendChild(card));
    }

    const rioInput = document.getElementById("rio");
    const savedRio = localStorage.getItem("rioRating");
    if (savedRio) rioInput.value = savedRio;

    function saveRio() {
      localStorage.setItem("rioRating", rioInput.value);
    }
  </script>
</body>
</html>
